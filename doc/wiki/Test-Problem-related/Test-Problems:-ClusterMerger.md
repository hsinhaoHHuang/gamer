> [!CAUTION]
> Please do not edit this file(page) manually since the workflow will overwrite your changes.
>
> This file(page) is automatically generated by the workflow `Update test problem wiki page` using the script `tool/wiki/sync_test_problem_pages.py`.
>
> The workflow is triggered by push changes to any of `example/test_problem/*/*/README.md` and `tool/wiki/sync_test_problem_pages.py`.


# Compilation flags
- Must enable
   - [[--model | Installation:-Option-List#--modle]]
   - [[--gravity | Installation:-Option-List#--gravity]]
   - [[--particle | Installation:-Option-List#--particle]]
   - [[--hdf5 | Installation:-Option-List#--hdf5]]
   - [[--par_attribute=0 | Installation:-Option-List#--par_attribute]]
   - [[--passive | Installation:-Option-List#--passive]]>= `Merger_cool_NumHalos` + `Merger_coll_UseMetals`
     (these are parameters in Input__TestProb)
- Must disable
   - [[--comoving | Installation:-Option-List#--comoving]]
- Available options
   - [[--mhd | Installation:-Option-List#--mhd]]
   - [[Miscellaneous Options | Installation:-Option-List#miscellaneous-options]]


# Default setup
1. Units:
   1. External (for `Input__TestProb` only)
      | [L] | [M]  |
      |---  |---   |
      | kpc | km/s |

   2. Internal (for all other input files and internal usage)
      | [L] | [M]         | [T]       | [V] = [L]/[T] | [D] = [M]/[L]^3  |
      |---  |---          |---        |---            |---               |
      | kpc | 1.0e14 Msun | 1.0e1 Gyr | ~ 9.8e1 km/s  | ~ 6.8e-27 g/cm^3 |

2. Default resolution ~ 15 kpc ([[MAX_LEVEL | Runtime-Parameters:-Refinement#MAX_LEVEL]] = 3)


# Note
1. Mimic the merging cluster simulation setup of Flash provided by John ZuHone
   [John ZuHone, 2011, ApJ, 728, 54](https://dx.doi.org/10.1088/0004-637X/728/1/54)
   [(arXiv:1004.3820)](https://arxiv.org/abs/1004.3820), but the initial conditions
   are somewhat different.

2. Run the script `download_ic.sh` to download the initial condition files for this test.
   These files are generated by John ZuHone.

3. Alternatively, you can construct the ICs yourself using the `cluster_generator` package.

   Install cluster_generator from GitHub and run the included `gamer_cluster_ics.py` script
   1. Clone the git repository to somewhere else probably
      ```bash
      git clone https://github.com/jzuhone/cluster_generator
      ```
   2. Move to the directory
      ```bash
      cd cluster_generator
      ```
   3. [Optional] Update SciPy to version >= 1.13.0
   4. Install package
      ```bash
      python -m pip install .
      ```
   5. Go back to the `gamer_cluster_ics.py` script and run with `python gamer_cluster_ics.py`

> [!WARNING]
> This package is under development and currently has poor documentation, contact [jzuhone@gmail.com](mailto:jzuhone@gmail.com) for details

4. No need to set [[PAR_NPAR | Particles#PAR_NPAR ]] in `Input__Parameter` since it will be reset automatically.

5. Some handy yt analysis scripts and a notebook are put in `yt_script`

   For example, to generate the slice plots, one can

   1. Move to directory
      ```bash
      cd yt_script
      ```
   2. Edit `idx_start` and `idx_end` in `plot_slice-z.py`.
   3. Execute the script
      ```bash
      python plot_slice-z.py
      ```
      or
      ```bash
      mpirun -np NUMBER_OF_CPU_CORES_YOU_HAVE python plot_slice-z.py
      ```
# Compilation flags
- Must enable
   - [[--model | Installation:-Option-List#--modle]]
   - [[--gravity | Installation:-Option-List#--gravity]]
   - [[--particle | Installation:-Option-List#--particle]]
   - [[--hdf5 | Installation:-Option-List#--hdf5]]
   - [[--par_attribute=0 | Installation:-Option-List#--par_attribute]]
   - [[--passive | Installation:-Option-List#--passive]]>= `Merger_cool_NumHalos` + `Merger_coll_UseMetals`
     (these are parameters in Input__TestProb)
- Must disable
   - [[--comoving | Installation:-Option-List#--comoving]]
- Available options
   - [[--mhd | Installation:-Option-List#--mhd]]
   - [[Miscellaneous Options | Installation:-Option-List#miscellaneous-options]]


# Default setup
1. Units:
   1. External (for `Input__TestProb` only)

      [L] = kpc

      [V] = km/s

   2. Internal (for all other input files and internal usage)

      [L] = Mpc

      [M] = 1.0e14 Msun

      [T] = 1.0e1 Gyr

      -->[V] = [L]/[T] ~ 9.8e1 km/s

      -->[D] = [M]/[L]^3 ~ 6.8e-27 g/cm^3

2. Default resolution ~ 15 kpc ([[MAX_LEVEL | Runtime-Parameters:-Refinement#MAX_LEVEL]] = 3)


# Note
1. Mimic the merging cluster simulation setup of Flash provided by John ZuHone

   John ZuHone, 2011, ApJ, 728, 54 (arXiv:1004.3820), but the initial conditions are somewhat different

2. Run the script `download_ic.sh` to download the initial condition files for this test

   These files are generated by John ZuHone

3. Alternatively, you can construct the ICs yourself using the `cluster_generator` package

   Install cluster_generator from GitHub and run the included `gamer_cluster_ics.py` script
   1. `git clone https://github.com/jzuhone/cluster_generator` (somewhere else probably)
   2. `cd cluster_generator`
   3. [Optional] Update SciPy to version >= 1.13.0
   4. `python -m pip install .`
   5. Go back to the `gamer_cluster_ics.py` script and run with `python gamer_cluster_ics.py`

> [!WARNING]
> This package is under development and currently has poor documentation, contact `jzuhone@gmail.com` for details

4. No need to set `PAR_NPAR` in `Input__Parameter` since it will be reset automatically.

5. Some handy yt analysis scripts and a notebook are put in `yt_script`

   For example, to generate the slice plots, one can

   1. `cd yt_script`
   2. Edit `idx_start` and `idx_end` in `plot_slice-z.py`
   3. `python plot_slice-z.py` (or `mpirun -np NUMBER_OF_CPU_CORES_YOU_HAVE python plot_slice-z.py`)
